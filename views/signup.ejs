<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Book Appointment - Sharp Cuts Barber Shop</title>
    <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
    <%- include('navbar') %>
    
    <main>
        <!--
        This form has 2 java script validation that are in the following directory
        /public/js/book.js
        it checks that
        1. the name has at least 3 characters
        2. the phone number has at least 10 characters
        -->
        <h2>Book Your Appointment</h2>
        
        <form method="post" action="/signup">
            <div class="form-group">
                <label for="name">Full Name:</label>
                <input type="text" id="name" name="name" required>
            </div>
            
            <div class="form-group">
                <label for="email">Email:</label>
                <input type="email" id="email" name="email" required>
            </div>
            
            <div class="form-group">
                <label for="phone">Phone Number:</label>
                <input type="tel" id="phone" name="phone" required>
            </div>
            
            <div class="form-group">
                <label for="service">Select Service:</label>
                <select id="service" name="serviceId" required>
                    <option value="">Choose a service</option>
                    <option value="1">Classic Haircut ($25)</option>
                    <option value="2">Beard Trim ($15)</option>
                    <option value="3">Hot Towel Shave ($30)</option>
                    <option value="4">Full Service ($60)</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="date">Preferred Date:</label>
                <input type="date" id="date" name="date" required>
                <p id="days-until"></p>
            </div>
            
            <div class="form-group">
                <label for="time">Preferred Time:</label>
                <select id="time" name="time" required>
                    <option value="">Select time</option>
                    <option value="9:00">9:00 AM</option>
                    <option value="10:00">10:00 AM</option>
                    <option value="11:00">11:00 AM</option>
                    <option value="12:00">12:00 PM</option>
                    <option value="13:00">1:00 PM</option>
                    <option value="14:00">2:00 PM</option>
                    <option value="15:00">3:00 PM</option>
                    <option value="16:00">4:00 PM</option>
                    <option value="17:00">5:00 PM</option>
                    <option value="18:00">6:00 PM</option>
                </select>
            </div>
            
            <button type="submit">Book Appointment</button>
        </form>
        <script>
            function calculateDaysUntil() {
                const selectedDate = document.getElementById('date').value;
                const daysDisplay = document.getElementById('days-until');
                
                if (selectedDate) {
                    const today = new Date();
                    const appointmentDate = new Date(selectedDate);
                    const timeDifference = appointmentDate.getTime() - today.getTime();
                    const daysDifference = Math.ceil(timeDifference / (1000 * 3600 * 24));
                    
                    if (daysDifference < 0) {
                        daysDisplay.textContent = "Please select a future date.";
                        daysDisplay.className = "error";
                    } else if (daysDifference === 0) {
                        daysDisplay.textContent = "Appointment is today!";
                        daysDisplay.className = "success";
                    } else if (daysDifference === 1) {
                        daysDisplay.textContent = "Appointment is tomorrow!";
                        daysDisplay.className = "success";
                    } else {
                        daysDisplay.textContent = `${daysDifference} days until your appointment.`;
                        daysDisplay.className = "normal";
                    }
                } else {
                    daysDisplay.textContent = "";
                    daysDisplay.className = "";
                }
            }
            
            document.getElementById('date').addEventListener('change', calculateDaysUntil);
        </script>
        <script src="/js/book.js"></script>
    </main>
</body>
</html>
